<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>D-Day</title>
  </head>
  <body
    style="
      display: flex;
      flex: 1;
      align-items: center;
      justify-content: center;
      padding: 0 4px;
    "
  ></body>
  <script src="https://unpkg.com/dayjs@1.8.21/dayjs.min.js"></script>
  <script>
    const formatMap = {
      minute: "minutes",
      hour: "hours",
      day: "days",
      month: "months",
      year: "years"
    };

    function spaceReplacer(str) {
      return str.replace(/-/g, " ");
    }

    window.onload = function () {
      const params = new URLSearchParams(window.location.search);
      const align = params.get("align") || "center";
      const color = params.get("color") || "rgb(255,132,58)";
      const bgColor = params.get("bg-color") || "white";

      const format = params.get("format") || "day";
      const sinceDateString = params.get("since") || "2022-12-04";

      const prefix = params.get("prefix") ? params.get("prefix") + " " : " ";
      const suffix = params.get("suffix") ? " " + params.get("suffix") : " days";

      const since = dayjs(sinceDateString);
      const now = dayjs();
      const diff = now.diff(since, format);

      const h2 = document.createElement("h2");
      h2.setAttribute("style", `flex:1; text-align:${align}; color:${color}`);
      document.body.parentElement.setAttribute(
        "style",
        `display: flex; flex: 1; height: 100%; background-color:${bgColor};`
      );
    };
  </script>
</html>